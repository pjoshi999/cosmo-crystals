(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[457],{257:(e,i,t)=>{"use strict";t.d(i,{A:()=>a});let a=(0,t(9946).A)("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]])},4005:(e,i,t)=>{"use strict";t.d(i,{e:()=>n});var a=t(5327);let s={all:["categories"],lists:()=>[...s.all,"list"],list:e=>[...s.lists(),{filters:e}]},l=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{data:i}=await a.u.get("/category/",{params:{page:e.page||1,limit:e.limit||10,search:e.search}});return i};var r=t(1769);let n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.I)({queryKey:s.list(e),queryFn:()=>l(e)})}},4416:(e,i,t)=>{"use strict";t.d(i,{A:()=>a});let a=(0,t(9946).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},4871:(e,i,t)=>{"use strict";t.r(i),t.d(i,{default:()=>h});var a=t(5155),s=t(2115),l=t(6874),r=t.n(l),n=t(2243),d=t(257),c=t(4416),o=t(4005),m=t(9918),u=t(6766);function h(e){var i,t;let{params:l}=e,{slug:h}=(0,s.use)(l),{data:x,isLoading:v}=(0,o.e)(),{data:g,isLoading:p}=(0,m.Q)(),[y,f]=(0,s.useState)([]),[j,b]=(0,s.useState)(null),[N,w]=(0,s.useState)(!1),[k,A]=(0,s.useState)({priceRange:[500,2e3],attributes:[],sort:"newest"});(0,s.useEffect)(()=>{let e=null==x?void 0:x.categories.find(e=>e.slug===(null==h?void 0:h.toLowerCase()));b(e||null);let i=e?null==g?void 0:g.products.filter(i=>(null==i?void 0:i.categoryId)===(null==e?void 0:e.id)):null==g?void 0:g.products,t=null==i?void 0:i.filter(e=>e.salePrice>=k.priceRange[0]&&e.salePrice<=k.priceRange[1]),a=null==t?void 0:t.filter(e=>k.attributes.some(i=>{var t;return(null===(t=e.subCategory)||void 0===t?void 0:t.name)===i}));k.attributes.length>0?f(a):f(t)},[h,x,g,k]);let P={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},B={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4}}},C=e=>{k.attributes.includes(e)?A({...k,attributes:k.attributes.filter(i=>i!==e)}):A({...k,attributes:[...k.attributes,e]})};return v||p?(0,a.jsx)("div",{className:"min-h-[80vh] bg-[#F7F3F4]",children:"Loading.."}):(0,a.jsx)(s.Suspense,{fallback:"Loading..",children:(0,a.jsx)("div",{className:"bg-[#F7F3F4] min-h-screen",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,a.jsx)(n.P.div,{className:"mb-6",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.4},children:(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,a.jsx)(r(),{href:"/",className:"hover:text-[#B73B45]",children:"Home /"}),j?(0,a.jsxs)("span",{className:"text-[#B73B45] font-medium capitalize",children:["\xa0",null==j?void 0:null===(i=j.name)||void 0===i?void 0:i.replaceAll("-"," ")]}):(0,a.jsx)("span",{className:"text-[#B73B45] font-medium",children:"\xa0All Crystals"})]})}),(0,a.jsxs)(n.P.div,{className:"mb-8",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6},children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"All Crystals"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:"description"})]}),(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row gap-6",children:[(0,a.jsx)(n.P.div,{className:"lg:hidden flex justify-between items-center mb-4",initial:{opacity:0},animate:{opacity:1},children:(0,a.jsxs)("button",{onClick:()=>w(!N),className:"flex items-center gap-2 bg-white px-4 py-2 rounded-lg shadow-sm",children:[(0,a.jsx)(d.A,{size:18}),(0,a.jsx)("span",{children:"Filters"})]})}),N&&(0,a.jsx)(n.P.div,{className:"fixed inset-0 backdrop-blur-sm bg-opacity-50 z-40 lg:hidden",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>w(!1)}),(0,a.jsxs)(n.P.div,{className:"\n              ".concat(N?"fixed inset-y-0 left-0 z-50":"hidden"," \n              lg:relative lg:block lg:z-auto w-72 bg-white p-6 rounded-lg shadow-lg lg:shadow-md\n            "),initial:{x:-100,opacity:0},animate:{x:N||window.innerWidth>=1024?0:-100,opacity:N||window.innerWidth>=1024?1:0},transition:{duration:.3},children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6 lg:hidden",children:[(0,a.jsx)("h2",{className:"text-lg font-medium",children:"Filters"}),(0,a.jsx)("button",{onClick:()=>w(!1),className:"text-gray-500",children:(0,a.jsx)(c.A,{size:20})})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-md font-medium mb-3",children:"Price Range"}),(0,a.jsxs)("div",{className:"px-2",children:[(0,a.jsx)("input",{type:"range",min:"500",max:"2000",value:k.priceRange[1],onChange:e=>A({...k,priceRange:[k.priceRange[0],parseInt(e.target.value)]}),className:"w-full accent-[#B73B45]"}),(0,a.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mt-2",children:[(0,a.jsxs)("span",{children:["₹",k.priceRange[0]]}),(0,a.jsxs)("span",{children:["₹",k.priceRange[1]]})]})]})]}),(0,a.jsx)("div",{className:"mb-6",children:null==x?void 0:null===(t=x.categories)||void 0===t?void 0:t.map((e,i)=>{var t;return(0,a.jsxs)("div",{className:"".concat(0!==i&&"pt-5"),children:[(0,a.jsx)("h3",{className:"text-md font-medium mb-3 capitalize",children:null==e?void 0:null===(t=e.name)||void 0===t?void 0:t.replaceAll("-"," ")}),(0,a.jsx)("div",{className:"space-y-2",children:null==e?void 0:e.subCategory.map(e=>{var i;return(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",id:"type-".concat(null==e?void 0:e.name),className:"h-4 w-4 rounded border-gray-300 text-[#B73B45] focus:ring-[#B73B45]",checked:k.attributes.includes(null==e?void 0:e.name),onChange:()=>C(null==e?void 0:e.name)}),(0,a.jsx)("label",{htmlFor:"type-".concat(null==e?void 0:e.name),className:"ml-2 text-sm text-gray-600 capitalize",children:null==e?void 0:null===(i=e.name)||void 0===i?void 0:i.replaceAll("-"," ")})]},null==e?void 0:e.id)})})]},null==e?void 0:e.id)})})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(n.P.div,{className:"hidden lg:flex justify-between items-center mb-6",initial:{opacity:0},animate:{opacity:1},children:(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Showing"," ",(0,a.jsx)("span",{className:"font-medium",children:null==y?void 0:y.length})," ","products"]})}),p?(0,a.jsx)(n.P.div,{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-6",variants:P,initial:"hidden",animate:"visible",children:[1,2,3,4,5,6].map(e=>(0,a.jsxs)(n.P.div,{variants:B,className:"bg-white rounded-xl shadow-md overflow-hidden",children:[(0,a.jsx)("div",{className:"h-48 md:h-56 lg:h-64 bg-gray-200 animate-pulse"}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded animate-pulse mb-2 w-3/4"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-1/2"}),(0,a.jsx)("div",{className:"h-6 bg-gray-200 rounded animate-pulse mt-4 w-1/3"})]})]},e))}):(0,a.jsx)(a.Fragment,{children:(null==y?void 0:y.length)===0?(0,a.jsxs)(n.P.div,{className:"bg-white rounded-xl p-8 text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[(0,a.jsx)("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"No products found"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Try adjusting your filters or browse our other categories"}),(0,a.jsx)(r(),{href:"/",className:"inline-block bg-[#B73B45] text-white py-2 px-6 rounded-lg font-medium hover:bg-[#8A2A33]",children:"Explore All Products"})]}):(0,a.jsx)(n.P.div,{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-6",variants:P,initial:"hidden",animate:"visible",children:y&&y.map(e=>{var i,t,s;return(0,a.jsx)(n.P.div,{variants:B,whileHover:{y:-8,transition:{duration:.2}},className:"bg-white rounded-xl shadow-md overflow-hidden",children:(0,a.jsxs)(r(),{href:"/product/".concat(null==e?void 0:e.id),className:"block",children:[(0,a.jsx)("div",{className:"relative h-48 md:h-56 lg:h-64 bg-[#F0E6E8]",children:e.images.length>0?e.images[0].url&&(0,a.jsx)(u.default,{src:e.images.map(e=>e.isMain?e.url:void 0).filter(e=>void 0!==e)[0]||e.images[0].url,alt:"Product Image",fill:!0,className:"object-cover"}):(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-24 h-24 rounded-full bg-[#D6A0A8] opacity-70"})})}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:null==e?void 0:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:null==e?void 0:null===(i=e.attributes.find(e=>(null==e?void 0:e.name)==="Crystal Type"))||void 0===i?void 0:i.value}),(0,a.jsxs)("div",{className:"mt-3 flex items-center",children:[(0,a.jsxs)("span",{className:"text-lg font-bold text-[#B73B45]",children:["₹",null==e?void 0:null===(t=e.salePrice)||void 0===t?void 0:t.toFixed(2)]}),e.salePrice<e.price&&(0,a.jsxs)("span",{className:"ml-2 text-sm text-gray-400 line-through",children:["₹",null==e?void 0:null===(s=e.price)||void 0===s?void 0:s.toFixed(2)]})]})]})]})},null==e?void 0:e.id)})})})]})]})]})})})}},5327:(e,i,t)=>{"use strict";t.d(i,{u:()=>l});var a=t(3464),s=t(7383);let l=a.A.create({baseURL:"https://cosmo-crystals-backend-6.onrender.com/api/v1",headers:{"Content-Type":"application/json"}});l.interceptors.request.use(async e=>{let i=s.A.get("accessToken");return i&&(e.headers.Authorization="Bearer ".concat(i)),e},e=>Promise.reject(e)),l.interceptors.response.use(e=>e,async e=>{var i,t;let a=e.config;if((null===(i=e.response)||void 0===i?void 0:i.status)===401&&(s.A.remove("accessToken"),(null===(t=e.response)||void 0===t?void 0:t.status)===401&&!a._retry)){a._retry=!0;let e=await r();if(e)return a.headers.Authorization="Bearer ".concat(e),l(a)}return Promise.reject(e)});let r=async()=>{try{var e;let i=s.A.get("refreshToken");if(!i)throw Error("No refresh token available");let t=await a.A.post("".concat("https://cosmo-crystals-backend-6.onrender.com/api/v1","/auth/refresh/"),{refreshToken:i}),l=null===(e=t.data)||void 0===e?void 0:e.accessToken;return s.A.set("accessToken",l,{secure:!0}),l}catch(e){return s.A.remove("accessToken"),null}}},7316:(e,i,t)=>{Promise.resolve().then(t.bind(t,4871))},9918:(e,i,t)=>{"use strict";t.d(i,{B:()=>c,Q:()=>d});var a=t(5327);let s={all:["products"],lists:()=>[...s.all,"list"],list:e=>[...s.lists(),{filters:e}],details:()=>[...s.all,"detail"],detail:e=>[...s.details(),e]},l=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{data:i}=await a.u.get("/products",{params:{page:e.page||1,limit:e.limit||20,category:e.category,minPrice:e.minPrice,maxPrice:e.maxPrice,search:e.search}});return i},r=async e=>{let{data:i}=await a.u.get("/products/".concat(e));return i};var n=t(1769);let d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.I)({queryKey:s.list(e),queryFn:()=>l(e)})},c=e=>(0,n.I)({queryKey:s.detail(e),queryFn:()=>r(e),enabled:!!e})},9946:(e,i,t)=>{"use strict";t.d(i,{A:()=>d});var a=t(2115);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=function(){for(var e=arguments.length,i=Array(e),t=0;t<e;t++)i[t]=arguments[t];return i.filter((e,i,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===i).join(" ").trim()};var r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,a.forwardRef)((e,i)=>{let{color:t="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:d,className:c="",children:o,iconNode:m,...u}=e;return(0,a.createElement)("svg",{ref:i,...r,width:s,height:s,stroke:t,strokeWidth:d?24*Number(n)/Number(s):n,className:l("lucide",c),...u},[...m.map(e=>{let[i,t]=e;return(0,a.createElement)(i,t)}),...Array.isArray(o)?o:[o]])}),d=(e,i)=>{let t=(0,a.forwardRef)((t,r)=>{let{className:d,...c}=t;return(0,a.createElement)(n,{ref:r,iconNode:i,className:l("lucide-".concat(s(e)),d),...c})});return t.displayName="".concat(e),t}}},e=>{var i=i=>e(e.s=i);e.O(0,[122,874,967,243,766,769,441,684,358],()=>i(7316)),_N_E=e.O()}]);