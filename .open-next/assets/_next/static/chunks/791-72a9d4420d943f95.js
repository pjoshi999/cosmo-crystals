"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[791],{1890:(e,t,r)=>{r.d(t,{L:()=>o,z:()=>n});var s=r(5327);let n={all:["cart"],lists:()=>[...n.all,"list"]},o=async()=>{let{data:e}=await s.u.get("/cart/");return e}},5327:(e,t,r)=>{r.d(t,{u:()=>o});var s=r(3464),n=r(7383);let o=s.A.create({baseURL:"https://cosmo-crystals-backend-6.onrender.com/api/v1",headers:{"Content-Type":"application/json"}});o.interceptors.request.use(async e=>{let t=n.A.get("accessToken");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),o.interceptors.response.use(e=>e,async e=>{var t,r;let s=e.config;if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&(n.A.remove("accessToken"),(null===(r=e.response)||void 0===r?void 0:r.status)===401&&!s._retry)){s._retry=!0;let e=await a();if(e)return s.headers.Authorization="Bearer ".concat(e),o(s)}return Promise.reject(e)});let a=async()=>{try{var e;let t=n.A.get("refreshToken");if(!t)throw Error("No refresh token available");let r=await s.A.post("".concat("https://cosmo-crystals-backend-6.onrender.com/api/v1","/auth/refresh/"),{refreshToken:t}),o=null===(e=r.data)||void 0===e?void 0:e.accessToken;return n.A.set("accessToken",o,{secure:!0}),o}catch(e){return n.A.remove("accessToken"),null}}},6334:(e,t,r)=>{r.d(t,{_:()=>o});var s=r(1890),n=r(1769);let o=()=>(0,n.I)({queryKey:s.z.lists(),queryFn:()=>(0,s.L)()})},8791:(e,t,r)=>{r.d(t,{default:()=>B});var s=r(5155),n=r(2115),o=r(6766),a=r(2243),i=r(869),l=r(2885),c=r(845),h=r(1508);class d extends n.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,r=e instanceof HTMLElement&&e.offsetWidth||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=r-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function u(e){let{children:t,isPresent:r,anchorX:o}=e,a=(0,n.useId)(),i=(0,n.useRef)(null),l=(0,n.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=(0,n.useContext)(h.Q);return(0,n.useInsertionEffect)(()=>{let{width:e,height:t,top:s,left:n,right:h}=l.current;if(r||!i.current||!e||!t)return;i.current.dataset.motionPopId=a;let d=document.createElement("style");return c&&(d.nonce=c),document.head.appendChild(d),d.sheet&&d.sheet.insertRule('\n          [data-motion-pop-id="'.concat(a,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat("left"===o?"left: ".concat(n):"right: ".concat(h),"px !important;\n            top: ").concat(s,"px !important;\n          }\n        ")),()=>{document.head.removeChild(d)}},[r]),(0,s.jsx)(d,{isPresent:r,childRef:i,sizeRef:l,children:n.cloneElement(t,{ref:i})})}let p=e=>{let{children:t,initial:r,isPresent:o,onExitComplete:a,custom:i,presenceAffectsLayout:h,mode:d,anchorX:p}=e,x=(0,l.M)(f),m=(0,n.useId)(),v=(0,n.useCallback)(e=>{for(let t of(x.set(e,!0),x.values()))if(!t)return;a&&a()},[x,a]),g=(0,n.useMemo)(()=>({id:m,initial:r,isPresent:o,custom:i,onExitComplete:v,register:e=>(x.set(e,!1),()=>x.delete(e))}),h?[Math.random(),v]:[o,v]);return(0,n.useMemo)(()=>{x.forEach((e,t)=>x.set(t,!1))},[o]),n.useEffect(()=>{o||x.size||!a||a()},[o]),"popLayout"===d&&(t=(0,s.jsx)(u,{isPresent:o,anchorX:p,children:t})),(0,s.jsx)(c.t.Provider,{value:g,children:t})};function f(){return new Map}var x=r(2082);let m=e=>e.key||"";function v(e){let t=[];return n.Children.forEach(e,e=>{(0,n.isValidElement)(e)&&t.push(e)}),t}var g=r(7494);let y=e=>{let{children:t,custom:r,initial:o=!0,onExitComplete:a,presenceAffectsLayout:c=!0,mode:h="sync",propagate:d=!1,anchorX:u="left"}=e,[f,y]=(0,x.xQ)(d),w=(0,n.useMemo)(()=>v(t),[t]),j=d&&!f?[]:w.map(m),k=(0,n.useRef)(!0),b=(0,n.useRef)(w),B=(0,l.M)(()=>new Map),[N,C]=(0,n.useState)(w),[M,P]=(0,n.useState)(w);(0,g.E)(()=>{k.current=!1,b.current=w;for(let e=0;e<M.length;e++){let t=m(M[e]);j.includes(t)?B.delete(t):!0!==B.get(t)&&B.set(t,!1)}},[M,j.length,j.join("-")]);let E=[];if(w!==N){let e=[...w];for(let t=0;t<M.length;t++){let r=M[t],s=m(r);j.includes(s)||(e.splice(t,0,r),E.push(r))}return"wait"===h&&E.length&&(e=E),P(v(e)),C(w),null}let{forceRender:L}=(0,n.useContext)(i.L);return(0,s.jsx)(s.Fragment,{children:M.map(e=>{let t=m(e),n=(!d||!!f)&&(w===M||j.includes(t));return(0,s.jsx)(p,{isPresent:n,initial:(!k.current||!!o)&&void 0,custom:r,presenceAffectsLayout:c,mode:h,onExitComplete:n?void 0:()=>{if(!B.has(t))return;B.set(t,!0);let e=!0;B.forEach(t=>{t||(e=!1)}),e&&(null==L||L(),P(b.current),d&&(null==y||y()),a&&a())},anchorX:u,children:e},t)})})};var w=r(6874),j=r.n(w),k=r(6334),b=r(7383);let B=e=>{let{options:t=!0}=e,[r,i]=(0,n.useState)(!1),{data:l,isLoading:c}=(0,k._)(),h=b.A.get("accessToken"),d=()=>{i(!r)};return(0,n.useEffect)(()=>{},[l]),(0,s.jsxs)("header",{className:"bg-white py-4 px-6 sticky top-0 z-50 shadow-sm",children:[(0,s.jsxs)("div",{className:"max-w-7xl mx-auto flex justify-between items-center",children:[(0,s.jsx)(a.P.a,{href:"/",initial:{opacity:0},animate:{opacity:1},className:"text-[#B73B45] text-2xl font-bold",children:(0,s.jsx)(o.default,{src:"/assets/logo.png",alt:"Cosmo Crystals",width:160,height:160,className:"h-full w-full object-cover"})}),t&&(0,s.jsxs)("nav",{className:"hidden md:flex space-x-8",children:[(0,s.jsx)(j(),{href:"/",className:"text-gray-800 hover:text-[#B73B45] transition-colors",children:"Home"}),(0,s.jsx)(j(),{href:"/category",className:"text-gray-800 hover:text-[#B73B45] transition-colors",children:"Category"}),(0,s.jsx)(j(),{href:"/about",className:"text-gray-800 hover:text-[#B73B45] transition-colors",children:"About"})]}),t&&(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)(j(),{href:"/profile",className:"p-2 hover:text-[#B73B45] transition-colors",children:(0,s.jsx)(a.P.div,{whileHover:{scale:1.1},whileTap:{scale:.9},children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})}),(0,s.jsx)(j(),{href:"/cart",className:"p-2 hover:text-[#B73B45] transition-colors relative",children:(0,s.jsxs)(a.P.div,{children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),h&&(null==l?void 0:l.length)>0&&!c&&(0,s.jsx)(a.P.div,{className:"absolute -top-1 -right-1 flex items-center justify-center",children:(0,s.jsx)("div",{className:"bg-[#B73B45] text-white text-xs font-medium rounded-full h-4 w-4 min-w-4 flex items-center justify-center shadow-sm",children:(null==l?void 0:l.length)>99?"99+":(null==l?void 0:l.length)||0})})]})}),(0,s.jsx)("button",{className:"md:hidden p-2",onClick:d,children:(0,s.jsx)(a.P.div,{whileHover:{scale:1.1},whileTap:{scale:.9},children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:r?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})})]})]}),(0,s.jsx)(y,{children:t&&r&&(0,s.jsx)(a.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"md:hidden mt-4 px-2",children:(0,s.jsxs)(a.P.nav,{className:"flex flex-col space-y-4 bg-white rounded-lg shadow-md p-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},children:[(0,s.jsx)(j(),{href:"/",className:"text-gray-800 hover:text-[#B73B45] transition-colors py-2 border-b border-gray-100",onClick:d,children:"Home"}),(0,s.jsx)(j(),{href:"/category",className:"text-gray-800 hover:text-[#B73B45] transition-colors py-2 border-b border-gray-100",onClick:d,children:"Category"}),(0,s.jsx)(j(),{href:"/about",className:"text-gray-800 hover:text-[#B73B45] transition-colors py-2",onClick:d,children:"About"})]})})})]})}}}]);