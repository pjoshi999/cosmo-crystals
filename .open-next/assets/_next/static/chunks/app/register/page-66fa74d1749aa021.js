(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[454],{3426:(e,r,a)=>{"use strict";a.d(r,{Ay:()=>p,Au:()=>m,Bi:()=>c,ms:()=>u,ug:()=>d});var t=a(5327);let s={signup:async e=>t.u.post("/auth/signup",e),login:async e=>t.u.post("/auth/login",e),resetPassword:async e=>t.u.post("/auth/reset-password",e),forgotPassword:async e=>t.u.post("/auth/forgot-password",e),logout:async()=>t.u.post("/auth/logout")};var o=a(9945),n=a(1990),i=a(7383);let l={expires:30,secure:!0},d=(0,n.zD)("auth/signup",async(e,r)=>{try{let r=await s.signup(e);if(r&&r.data)return r.data;throw Error("No data found")}catch(a){let{error:e}=(0,o.h)(a);return r.rejectWithValue(e)}}),c=(0,n.zD)("auth/login",async(e,r)=>{try{let r=await s.login(e);if(r&&r.data)return r.data;throw Error("No data found")}catch(a){let{error:e}=(0,o.h)(a);return r.rejectWithValue(e)}}),u=(0,n.zD)("auth/resetPassword",async(e,r)=>{try{let r=await s.resetPassword(e);if(r&&r.data)return r.data;throw Error("No data found")}catch(a){let{error:e}=(0,o.h)(a);return r.rejectWithValue(e)}}),m=(0,n.zD)("auth/forgotPassword",async(e,r)=>{try{let r=await s.forgotPassword(e);if(r&&r.data)return r.data;throw Error("No data found")}catch(a){let{error:e}=(0,o.h)(a);return r.rejectWithValue(e)}}),h=(0,n.zD)("auth/logout",async(e,r)=>{try{let e=await s.logout();if(e&&e.data)return e.data;throw Error("No data found")}catch(a){let{error:e}=(0,o.h)(a);return r.rejectWithValue(e)}}),f=(0,n.Z0)({name:"auth",initialState:{loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(c.pending,e=>{e.loading=!0,e.error=null}).addCase(c.fulfilled,(e,r)=>{e.error=null,e.loading=!1,i.A.set("accessToken",r.payload.accessToken,l),i.A.set("refreshToken",r.payload.refreshToken,l)}).addCase(c.rejected,(e,r)=>{e.error=r.payload,e.loading=!1}),e.addCase(d.pending,e=>{e.loading=!0,e.error=null}).addCase(d.fulfilled,(e,r)=>{e.error=null,e.loading=!1,i.A.set("accessToken",r.payload.accessToken,l),i.A.set("refreshToken",r.payload.refreshToken,l)}).addCase(d.rejected,(e,r)=>{e.error=r.payload,e.loading=!1}),e.addCase(m.pending,e=>{e.loading=!0,e.error=null}).addCase(m.fulfilled,e=>{e.error=null,e.loading=!1}).addCase(m.rejected,(e,r)=>{e.error=r.payload,e.loading=!1}),e.addCase(u.pending,e=>{e.loading=!0,e.error=null}).addCase(u.fulfilled,e=>{e.error=null,e.loading=!1}).addCase(u.rejected,(e,r)=>{e.error=r.payload,e.loading=!1}),e.addCase(h.pending,e=>{e.loading=!0,e.error=null}).addCase(h.fulfilled,e=>{e.error=null,e.loading=!1,i.A.remove("accessToken"),i.A.remove("refreshToken")}).addCase(h.rejected,(e,r)=>{e.error=r.payload,e.loading=!1})}}),{}=f.actions,p=f.reducer},5327:(e,r,a)=>{"use strict";a.d(r,{u:()=>o});var t=a(3464),s=a(7383);let o=t.A.create({baseURL:"https://cosmo-crystals-backend-6.onrender.com/api/v1",headers:{"Content-Type":"application/json"}});o.interceptors.request.use(async e=>{let r=s.A.get("accessToken");return r&&(e.headers.Authorization="Bearer ".concat(r)),e},e=>Promise.reject(e)),o.interceptors.response.use(e=>e,async e=>{var r,a;let t=e.config;if((null===(r=e.response)||void 0===r?void 0:r.status)===401&&(s.A.remove("accessToken"),(null===(a=e.response)||void 0===a?void 0:a.status)===401&&!t._retry)){t._retry=!0;let e=await n();if(e)return t.headers.Authorization="Bearer ".concat(e),o(t)}return Promise.reject(e)});let n=async()=>{try{var e;let r=s.A.get("refreshToken");if(!r)throw Error("No refresh token available");let a=await t.A.post("".concat("https://cosmo-crystals-backend-6.onrender.com/api/v1","/auth/refresh/"),{refreshToken:r}),o=null===(e=a.data)||void 0===e?void 0:e.accessToken;return s.A.set("accessToken",o,{secure:!0}),o}catch(e){return s.A.remove("accessToken"),null}}},5695:(e,r,a)=>{"use strict";var t=a(8999);a.o(t,"useRouter")&&a.d(r,{useRouter:function(){return t.useRouter}}),a.o(t,"useSearchParams")&&a.d(r,{useSearchParams:function(){return t.useSearchParams}})},6616:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>h});var t=a(5155),s=a(2115),o=a(6874),n=a.n(o),i=a(5695),l=a(2243),d=a(8126),c=a.n(d),u=a(9224),m=a(3426);function h(){let e=(0,i.useRouter)(),r=(0,u.CU)(),[a,o]=(0,s.useState)({name:"",email:"",password:"",confirmPassword:""}),[d,h]=(0,s.useState)(!1),[f,p]=(0,s.useState)(""),[g,y]=(0,s.useState)(1),[x,v]=(0,s.useState)(null),w={initial:{x:20,opacity:0},animate:{x:0,opacity:1,transition:{duration:.5}},exit:{x:-20,opacity:0,transition:{duration:.3}}},b={initial:{y:20,opacity:0},animate:{y:0,opacity:1,transition:{duration:.5}}},j={animate:{transition:{staggerChildren:.1}}};(0,s.useEffect)(()=>{let e=localStorage.getItem("cartPendingAction");if(e)try{v(JSON.parse(e))}catch(e){console.error("Error parsing pending cart action",e),localStorage.removeItem("cartPendingAction")}},[]);let P=e=>{let{name:r,value:a}=e.target;o(e=>({...e,[r]:a}))},C=async t=>{if(t.preventDefault(),p(""),a.password.length<8){p("Password must be greater than 8 characters");return}if(a.password!==a.confirmPassword){p("Passwords do not match");return}h(!0);try{let t=await r.dispatch((0,m.ug)({name:a.name,email:a.email,password:a.password}));m.ug.fulfilled.match(t)&&e.push("/")}catch(e){p("Registration failed. Please try again.")}finally{h(!1)}};return(0,t.jsxs)(l.P.div,{className:"min-h-[90vh] bg-[#F7F3F4] flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",initial:"initial",animate:"animate",exit:"exit",variants:{initial:{opacity:0},animate:{opacity:1,transition:{duration:.6}},exit:{opacity:0,transition:{duration:.4}}},children:[(0,t.jsxs)(c(),{children:[(0,t.jsx)("title",{children:"Create Account | Cosmo Crystals"}),(0,t.jsx)("meta",{name:"description",content:"Join Cosmo Crystals for a healing crystal experience"})]}),(0,t.jsx)("div",{className:"max-w-md w-full",children:(0,t.jsxs)(l.P.div,{className:"bg-white rounded-2xl shadow-lg overflow-hidden p-8",variants:j,children:[(0,t.jsxs)(l.P.div,{variants:b,children:[(0,t.jsx)("h2",{className:"text-center text-3xl font-bold text-[#B73B45] mb-3",children:"Create Account"}),(0,t.jsx)("p",{className:"text-center text-gray-600 mb-8",children:"Become a part of the Cosmo Crystals community!"})]}),f&&(0,t.jsx)(l.P.div,{className:"bg-red-50 text-red-600 p-4 rounded-lg mb-6",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},children:f}),(0,t.jsx)("div",{className:"mb-8"}),1===g&&(0,t.jsx)(l.P.form,{onSubmit:e=>{if(e.preventDefault(),!a.name||!a.email){p("Please provide your name and email");return}p(""),y(2)},initial:"initial",animate:"animate",exit:"exit",variants:w,children:(0,t.jsxs)(l.P.div,{className:"space-y-6",variants:j,children:[(0,t.jsxs)(l.P.div,{variants:b,children:[(0,t.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),(0,t.jsx)("input",{id:"name",name:"name",type:"text",required:!0,value:a.name,onChange:P,className:"w-full px-4 py-3 border border-gray-300 rounded-full focus:ring-[#B73B45] focus:border-[#B73B45] focus:outline-none transition-all",placeholder:"Enter Full Name"})]}),(0,t.jsxs)(l.P.div,{variants:b,children:[(0,t.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),(0,t.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:a.email,onChange:P,className:"w-full px-4 py-3 border border-gray-300 rounded-full focus:ring-[#B73B45] focus:border-[#B73B45] focus:outline-none transition-all",placeholder:"Enter Email Address"})]}),(0,t.jsx)(l.P.div,{variants:b,children:(0,t.jsx)(l.P.button,{type:"submit",whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full bg-[#B73B45] text-white py-3 px-4 rounded-full shadow-md hover:shadow-lg transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#B73B45]",children:"Continue"})})]})},"step1"),2===g&&(0,t.jsx)(l.P.form,{onSubmit:C,initial:"initial",animate:"animate",exit:"exit",variants:w,children:(0,t.jsxs)(l.P.div,{className:"space-y-6",variants:j,children:[(0,t.jsxs)(l.P.div,{variants:b,children:[(0,t.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,t.jsx)("input",{id:"password",name:"password",type:"password",required:!0,value:a.password,onChange:P,className:"w-full px-4 py-3 border border-gray-300 rounded-full focus:ring-[#B73B45] focus:border-[#B73B45] focus:outline-none transition-all",placeholder:"••••••••"})]}),(0,t.jsxs)(l.P.div,{variants:b,children:[(0,t.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),(0,t.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:a.confirmPassword,onChange:P,className:"w-full px-4 py-3 border border-gray-300 rounded-full focus:ring-[#B73B45] focus:border-[#B73B45] focus:outline-none transition-all",placeholder:"••••••••"})]}),(0,t.jsxs)(l.P.div,{variants:b,className:"flex space-x-4",children:[(0,t.jsx)(l.P.button,{type:"button",onClick:()=>{y(1),p("")},whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-1/3 bg-gray-200 text-gray-800 py-3 px-4 rounded-full shadow-md hover:shadow-lg transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Back"}),(0,t.jsx)(l.P.button,{type:"submit",disabled:d,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-2/3 bg-[#B73B45] text-white py-3 px-4 rounded-full shadow-md hover:shadow-lg transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#B73B45] disabled:opacity-70",children:d?(0,t.jsxs)("span",{className:"flex items-center justify-center",children:[(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating Account..."]}):"Create Account"})]})]})},"step2"),(0,t.jsxs)(l.P.div,{className:"mt-8 text-center text-sm text-gray-600",variants:b,children:["Already have an account?"," ",(0,t.jsx)(n(),{href:"/login",className:"font-medium text-[#B73B45] hover:text-[#8A2A33] transition-colors",children:"Sign in"})]})]})})]})}},7651:(e,r,a)=>{Promise.resolve().then(a.bind(a,6616))},8126:(e,r)=>{"use strict";function a(){return null}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return a}}),("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),e.exports=r.default)},9224:(e,r,a)=>{"use strict";a.d(r,{CU:()=>s});var t=a(4540);t.wA.withTypes(),t.d4.withTypes();let s=t.Pj.withTypes()},9945:(e,r,a)=>{"use strict";a.d(r,{h:()=>s});var t=a(6671);let s=e=>{if(!e.response)return t.oR.error("Network error occurred"),{error:{network:["Network error occurred"]},toastMessage:"Network error occurred"};let{data:r,status:a}=e.response;try{let e={};if("object"==typeof r&&null!==r)return(null==r?void 0:r.detail)&&(e.detail=[null==r?void 0:r.detail]),"string"==typeof(null==r?void 0:r.error)&&t.oR.error(null==r?void 0:r.error),(null==r?void 0:r.message)&&(e.message=[null==r?void 0:r.message]),Array.isArray(null==r?void 0:r.error)&&(null==r||r.error.map(e=>{t.oR.error((null==e?void 0:e.message)||e)})),{error:Array.isArray(null==r?void 0:r.error)?null==r?void 0:r.error.filter(e=>void 0!==e):[null==r?void 0:r.error].filter(e=>void 0!==e),toastMessage:400===a?"Please correct the errors and try again":"An error occurred"}}catch(e){console.error("Error parsing API response:",e)}return{error:{general:["An unexpected error occurred"]},toastMessage:"An unexpected error occurred"}}}},e=>{var r=r=>e(e.s=r);e.O(0,[122,874,243,405,441,684,358],()=>r(7651)),_N_E=e.O()}]);