(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[162],{3426:(e,r,t)=>{"use strict";t.d(r,{Ay:()=>f,Au:()=>h,Bi:()=>c,ms:()=>u,ug:()=>d});var a=t(5327);let s={signup:async e=>a.u.post("/auth/signup",e),login:async e=>a.u.post("/auth/login",e),resetPassword:async e=>a.u.post("/auth/reset-password",e),forgotPassword:async e=>a.u.post("/auth/forgot-password",e),logout:async()=>a.u.post("/auth/logout")};var o=t(9945),n=t(1990),l=t(7383);let i={expires:30,secure:!0},d=(0,n.zD)("auth/signup",async(e,r)=>{try{let r=await s.signup(e);if(r&&r.data)return r.data;throw Error("No data found")}catch(t){let{error:e}=(0,o.h)(t);return r.rejectWithValue(e)}}),c=(0,n.zD)("auth/login",async(e,r)=>{try{let r=await s.login(e);if(r&&r.data)return r.data;throw Error("No data found")}catch(t){let{error:e}=(0,o.h)(t);return r.rejectWithValue(e)}}),u=(0,n.zD)("auth/resetPassword",async(e,r)=>{try{let r=await s.resetPassword(e);if(r&&r.data)return r.data;throw Error("No data found")}catch(t){let{error:e}=(0,o.h)(t);return r.rejectWithValue(e)}}),h=(0,n.zD)("auth/forgotPassword",async(e,r)=>{try{let r=await s.forgotPassword(e);if(r&&r.data)return r.data;throw Error("No data found")}catch(t){let{error:e}=(0,o.h)(t);return r.rejectWithValue(e)}}),p=(0,n.zD)("auth/logout",async(e,r)=>{try{let e=await s.logout();if(e&&e.data)return e.data;throw Error("No data found")}catch(t){let{error:e}=(0,o.h)(t);return r.rejectWithValue(e)}}),m=(0,n.Z0)({name:"auth",initialState:{loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(c.pending,e=>{e.loading=!0,e.error=null}).addCase(c.fulfilled,(e,r)=>{e.error=null,e.loading=!1,l.A.set("accessToken",r.payload.accessToken,i),l.A.set("refreshToken",r.payload.refreshToken,i)}).addCase(c.rejected,(e,r)=>{e.error=r.payload,e.loading=!1}),e.addCase(d.pending,e=>{e.loading=!0,e.error=null}).addCase(d.fulfilled,(e,r)=>{e.error=null,e.loading=!1,l.A.set("accessToken",r.payload.accessToken,i),l.A.set("refreshToken",r.payload.refreshToken,i)}).addCase(d.rejected,(e,r)=>{e.error=r.payload,e.loading=!1}),e.addCase(h.pending,e=>{e.loading=!0,e.error=null}).addCase(h.fulfilled,e=>{e.error=null,e.loading=!1}).addCase(h.rejected,(e,r)=>{e.error=r.payload,e.loading=!1}),e.addCase(u.pending,e=>{e.loading=!0,e.error=null}).addCase(u.fulfilled,e=>{e.error=null,e.loading=!1}).addCase(u.rejected,(e,r)=>{e.error=r.payload,e.loading=!1}),e.addCase(p.pending,e=>{e.loading=!0,e.error=null}).addCase(p.fulfilled,e=>{e.error=null,e.loading=!1,l.A.remove("accessToken"),l.A.remove("refreshToken")}).addCase(p.rejected,(e,r)=>{e.error=r.payload,e.loading=!1})}}),{}=m.actions,f=m.reducer},5327:(e,r,t)=>{"use strict";t.d(r,{u:()=>o});var a=t(3464),s=t(7383);let o=a.A.create({baseURL:"https://cosmo-crystals-backend-6.onrender.com/api/v1",headers:{"Content-Type":"application/json"}});o.interceptors.request.use(async e=>{let r=s.A.get("accessToken");return r&&(e.headers.Authorization="Bearer ".concat(r)),e},e=>Promise.reject(e)),o.interceptors.response.use(e=>e,async e=>{var r,t;let a=e.config;if((null===(r=e.response)||void 0===r?void 0:r.status)===401&&(s.A.remove("accessToken"),(null===(t=e.response)||void 0===t?void 0:t.status)===401&&!a._retry)){a._retry=!0;let e=await n();if(e)return a.headers.Authorization="Bearer ".concat(e),o(a)}return Promise.reject(e)});let n=async()=>{try{var e;let r=s.A.get("refreshToken");if(!r)throw Error("No refresh token available");let t=await a.A.post("".concat("https://cosmo-crystals-backend-6.onrender.com/api/v1","/auth/refresh/"),{refreshToken:r}),o=null===(e=t.data)||void 0===e?void 0:e.accessToken;return s.A.set("accessToken",o,{secure:!0}),o}catch(e){return s.A.remove("accessToken"),null}}},7773:(e,r,t)=>{Promise.resolve().then(t.bind(t,9028))},8126:(e,r)=>{"use strict";function t(){return null}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return t}}),("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),e.exports=r.default)},9028:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>h});var a=t(5155),s=t(2115),o=t(6874),n=t.n(o),l=t(2243),i=t(8126),d=t.n(i),c=t(9224),u=t(3426);function h(){let e=(0,c.CU)(),[r,t]=(0,s.useState)(""),[o,i]=(0,s.useState)(!1),[h,p]=(0,s.useState)(""),[m,f]=(0,s.useState)(!1),y={initial:{y:20,opacity:0},animate:{y:0,opacity:1,transition:{duration:.6}}},g={animate:{transition:{staggerChildren:.1}}},x=async t=>{t.preventDefault(),p(""),f(!1),i(!0);try{let t=await e.dispatch((0,u.Au)({email:r}));u.Au.fulfilled.match(t)&&f(!0)}catch(e){p("An error occurred. Please try again.")}finally{i(!1)}};return(0,a.jsxs)(l.P.div,{className:"min-h-[90vh] bg-[#F7F3F4] flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",initial:"initial",animate:"animate",exit:"exit",variants:{initial:{opacity:0},animate:{opacity:1,transition:{duration:.6}},exit:{opacity:0,transition:{duration:.4}}},children:[(0,a.jsxs)(d(),{children:[(0,a.jsx)("title",{children:"Forgot Password | Cosmo Crystals"}),(0,a.jsx)("meta",{name:"description",content:"Reset your Cosmo Crystals password"})]}),(0,a.jsx)("div",{className:"max-w-md w-full",children:(0,a.jsxs)(l.P.div,{className:"bg-white rounded-2xl shadow-lg overflow-hidden p-8",variants:g,children:[(0,a.jsxs)(l.P.div,{variants:y,children:[(0,a.jsx)("h2",{className:"text-center text-3xl font-bold text-[#B73B45] mb-6",children:"Forgot Password"}),(0,a.jsx)("p",{className:"text-center text-gray-600 mb-8",children:"Enter your email and we'll send you a link to reset your password"})]}),h&&(0,a.jsx)(l.P.div,{className:"bg-red-50 text-red-600 p-4 rounded-lg mb-6",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},children:h}),m?(0,a.jsxs)(l.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},className:"text-center",children:[(0,a.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-green-100 mb-6",children:(0,a.jsx)("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Check your email"}),(0,a.jsxs)("p",{className:"text-gray-600 mb-6",children:["We've sent a password reset link to ",r]}),(0,a.jsx)(n(),{href:"/login",className:"inline-block text-[#B73B45] hover:text-[#8A2A33] font-medium transition-colors",children:"Return to login"})]}):(0,a.jsx)("form",{onSubmit:x,children:(0,a.jsxs)(l.P.div,{className:"space-y-6",variants:g,children:[(0,a.jsxs)(l.P.div,{variants:y,children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),(0,a.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:r,onChange:e=>t(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-full focus:ring-[#B73B45] focus:border-[#B73B45] focus:outline-none transition-all",placeholder:"your@email.com"})]}),(0,a.jsx)(l.P.div,{variants:y,children:(0,a.jsx)(l.P.button,{type:"submit",disabled:o,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full bg-[#B73B45] text-white py-3 px-4 rounded-full shadow-md hover:shadow-lg transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#B73B45] disabled:opacity-70",children:o?(0,a.jsxs)("span",{className:"flex items-center justify-center",children:[(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending..."]}):"Send Reset Link"})})]})}),!m&&(0,a.jsxs)(l.P.div,{className:"mt-8 text-center text-sm text-gray-600",variants:y,children:["Remember your password?"," ",(0,a.jsx)(n(),{href:"/login",className:"font-medium text-[#B73B45] hover:text-[#8A2A33] transition-colors",children:"Sign in"})]})]})})]})}},9224:(e,r,t)=>{"use strict";t.d(r,{CU:()=>s});var a=t(4540);a.wA.withTypes(),a.d4.withTypes();let s=a.Pj.withTypes()},9945:(e,r,t)=>{"use strict";t.d(r,{h:()=>s});var a=t(6671);let s=e=>{if(!e.response)return a.oR.error("Network error occurred"),{error:{network:["Network error occurred"]},toastMessage:"Network error occurred"};let{data:r,status:t}=e.response;try{let e={};if("object"==typeof r&&null!==r)return(null==r?void 0:r.detail)&&(e.detail=[null==r?void 0:r.detail]),"string"==typeof(null==r?void 0:r.error)&&a.oR.error(null==r?void 0:r.error),(null==r?void 0:r.message)&&(e.message=[null==r?void 0:r.message]),Array.isArray(null==r?void 0:r.error)&&(null==r||r.error.map(e=>{a.oR.error((null==e?void 0:e.message)||e)})),{error:Array.isArray(null==r?void 0:r.error)?null==r?void 0:r.error.filter(e=>void 0!==e):[null==r?void 0:r.error].filter(e=>void 0!==e),toastMessage:400===t?"Please correct the errors and try again":"An error occurred"}}catch(e){console.error("Error parsing API response:",e)}return{error:{general:["An unexpected error occurred"]},toastMessage:"An unexpected error occurred"}}}},e=>{var r=r=>e(e.s=r);e.O(0,[122,874,243,405,441,684,358],()=>r(7773)),_N_E=e.O()}]);