(()=>{var e={};e.id=490,e.ids=[490],e.modules={1172:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>R});var s=r(60687),a=r(43210),i=r(30474),l=r(42885),n=r(95282),o=r.n(n);let d=(0,r(62688).A)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);var c=r(41320);r(15659);var u=r(11860),p=r(2822),h=r(53906),m=r(48618),x=r(56923);class f extends a.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,r=e instanceof HTMLElement&&e.offsetWidth||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=r-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function y({children:e,isPresent:t,anchorX:r}){let i=(0,a.useId)(),l=(0,a.useRef)(null),n=(0,a.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=(0,a.useContext)(x.Q);return(0,a.useInsertionEffect)(()=>{let{width:e,height:s,top:a,left:d,right:c}=n.current;if(t||!l.current||!e||!s)return;let u="left"===r?`left: ${d}`:`right: ${c}`;l.current.dataset.motionPopId=i;let p=document.createElement("style");return o&&(p.nonce=o),document.head.appendChild(p),p.sheet&&p.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${s}px !important;
            ${u}px !important;
            top: ${a}px !important;
          }
        `),()=>{document.head.removeChild(p)}},[t]),(0,s.jsx)(f,{isPresent:t,childRef:l,sizeRef:n,children:a.cloneElement(e,{ref:l})})}let g=({children:e,initial:t,isPresent:r,onExitComplete:i,custom:l,presenceAffectsLayout:n,mode:o,anchorX:d})=>{let c=(0,h.M)(v),u=(0,a.useId)(),p=(0,a.useCallback)(e=>{for(let t of(c.set(e,!0),c.values()))if(!t)return;i&&i()},[c,i]),x=(0,a.useMemo)(()=>({id:u,initial:t,isPresent:r,custom:l,onExitComplete:p,register:e=>(c.set(e,!1),()=>c.delete(e))}),n?[Math.random(),p]:[r,p]);return(0,a.useMemo)(()=>{c.forEach((e,t)=>c.set(t,!1))},[r]),a.useEffect(()=>{r||c.size||!i||i()},[r]),"popLayout"===o&&(e=(0,s.jsx)(y,{isPresent:r,anchorX:d,children:e})),(0,s.jsx)(m.t.Provider,{value:x,children:e})};function v(){return new Map}var j=r(93905);let b=e=>e.key||"";function w(e){let t=[];return a.Children.forEach(e,e=>{(0,a.isValidElement)(e)&&t.push(e)}),t}var C=r(32097);let N=({children:e,custom:t,initial:r=!0,onExitComplete:i,presenceAffectsLayout:l=!0,mode:n="sync",propagate:o=!1,anchorX:d="left"})=>{let[c,u]=(0,j.xQ)(o),m=(0,a.useMemo)(()=>w(e),[e]),x=o&&!c?[]:m.map(b),f=(0,a.useRef)(!0),y=(0,a.useRef)(m),v=(0,h.M)(()=>new Map),[N,P]=(0,a.useState)(m),[k,q]=(0,a.useState)(m);(0,C.E)(()=>{f.current=!1,y.current=m;for(let e=0;e<k.length;e++){let t=b(k[e]);x.includes(t)?v.delete(t):!0!==v.get(t)&&v.set(t,!1)}},[k,x.length,x.join("-")]);let E=[];if(m!==N){let e=[...m];for(let t=0;t<k.length;t++){let r=k[t],s=b(r);x.includes(s)||(e.splice(t,0,r),E.push(r))}return"wait"===n&&E.length&&(e=E),q(w(e)),P(m),null}let{forceRender:A}=(0,a.useContext)(p.L);return(0,s.jsx)(s.Fragment,{children:k.map(e=>{let a=b(e),p=(!o||!!c)&&(m===k||x.includes(a));return(0,s.jsx)(g,{isPresent:p,initial:(!f.current||!!r)&&void 0,custom:t,presenceAffectsLayout:l,mode:n,onExitComplete:p?void 0:()=>{if(!v.has(a))return;v.set(a,!0);let e=!0;v.forEach(t=>{t||(e=!1)}),e&&(null==A||A(),q(y.current),o&&(null==u||u()),i&&i())},anchorX:d,children:e},a)})})};var P=r(16189);let k=({isOpen:e,onClose:t,productName:r,quantity:a,productId:i})=>{let n=(0,P.useRouter)();return(0,s.jsx)(N,{children:e&&(0,s.jsxs)("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[(0,s.jsx)(l.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black bg-opacity-50",onClick:t}),(0,s.jsxs)(l.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-xl p-6 w-full max-w-md z-10 shadow-xl relative",children:[(0,s.jsx)("button",{onClick:t,className:"absolute right-4 top-4 text-gray-500 hover:text-gray-800",children:(0,s.jsx)(u.A,{size:20})}),(0,s.jsxs)("div",{className:"text-center mb-6",children:[(0,s.jsx)("h3",{className:"text-2xl font-bold text-[#B73B45] mb-2",children:"Sign in Required"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Please sign in to add items to your cart"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("button",{onClick:()=>{localStorage.setItem("cartPendingAction",JSON.stringify({action:"addToCart",productName:r,productId:i,quantity:a})),n.push("/login")},className:"w-full bg-[#B73B45] text-white py-3 px-4 rounded-full shadow-md hover:shadow-lg transition-all",children:"Sign In"}),(0,s.jsx)("button",{onClick:()=>{localStorage.setItem("cartPendingAction",JSON.stringify({action:"addToCart",productName:r,productId:i,quantity:a})),n.push("/register")},className:"w-full bg-white border border-[#B73B45] text-[#B73B45] py-3 px-4 rounded-full shadow-md hover:shadow-lg transition-all",children:"Create Account"}),(0,s.jsx)("button",{onClick:t,className:"w-full text-gray-500 py-2",children:"Continue Browsing"})]})]})]})})};var q=r(31595),E=r(98234),A=r(52581);function R({params:e}){let{slug:t}=(0,a.use)(e),r=(0,E.CU)(),{data:n,isLoading:u}=(0,c.B)(t),[p,h]=(0,a.useState)(0),[m,x]=(0,a.useState)(1),[f,y]=(0,a.useState)(!1),[g,v]=(0,a.useState)(!1),j=async()=>{if(g){let e=await r.dispatch((0,q.YQ)({productId:n?.id,quantity:m}));q.YQ.fulfilled.match(e)&&A.oR.success("Product added to cart successfully!")}else y(!0)};return u?(0,s.jsx)("div",{className:"min-h-[80vh] bg-[#F7F3F4] flex items-center justify-center",children:"Loading..."}):(0,s.jsxs)("div",{className:"bg-[#F7F3F4] min-h-[80vh]",children:[(0,s.jsxs)(o(),{children:[(0,s.jsx)("title",{children:`${n?.name} | Cosmo Crystals`}),(0,s.jsx)("meta",{name:"description",content:`${n?.name} - ${n?.description.substring(0,150)}...`})]}),(0,s.jsx)("main",{className:"max-w-7xl mx-auto px-4 py-8 md:py-12",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12",children:[(0,s.jsxs)(l.P.div,{initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{duration:.6}}},className:"flex flex-col md:flex-row gap-4",children:[(0,s.jsx)("div",{className:"flex md:flex-col gap-3 order-2 md:order-1",children:n.images.map((e,t)=>(0,s.jsx)(l.P.div,{className:`w-20 h-20 border rounded-xl overflow-hidden cursor-pointer ${p===t?"border-[#B73B45] border-2":"border-gray-200"}`,whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>h(t),children:(0,s.jsxs)("div",{className:"relative w-full h-full",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-white"}),(0,s.jsx)(i.default,{src:n?.images[t]?.url,alt:n?.images[t]?.alt||n?.name,fill:!0,className:"object-cover"})]})},e.id))}),(0,s.jsx)("div",{className:"flex-1 order-1 md:order-2",children:(0,s.jsxs)(l.P.div,{className:"relative h-[400px] md:h-[500px] rounded-xl overflow-hidden",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-white"}),(0,s.jsx)(i.default,{src:n?.images[p]?.url,alt:n?.images[p]?.alt||n?.name,fill:!0,className:"object-cover"})]},p)})]}),(0,s.jsxs)(l.P.div,{initial:"hidden",animate:"visible",variants:{hidden:{y:50,opacity:0},visible:{y:0,opacity:1,transition:{duration:.6}}},className:"flex flex-col",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-medium text-gray-800 my-2",children:n.name}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("span",{className:"text-3xl font-bold text-[#EA5C6F] flex items-start gap-0.5",children:[(0,s.jsx)("span",{className:"text-sm pt-1",children:"₹"}),n.salePrice]}),n.salePrice<n.price&&(0,s.jsxs)("span",{className:"text-gray-400 line-through",children:["₹",n.price]})]})]}),(0,s.jsxs)("div",{className:"mt-6 flex items-center gap-3",children:[(0,s.jsxs)("div",{className:"flex border border-gray-300 rounded-md",children:[(0,s.jsx)("button",{className:"text-lg w-10 h-10 flex items-center justify-center text-gray-500 hover:text-[#B73B45]",onClick:()=>x(Math.max(1,m-1)),children:"‒"}),(0,s.jsx)("div",{className:"w-12 h-10 flex items-center justify-center border-x border-gray-300",children:m}),(0,s.jsx)("button",{className:"text-lg w-10 h-10 flex items-center justify-center text-gray-500 hover:text-[#B73B45]",onClick:()=>x(Math.min(n.stock,m+1)),children:"+"})]}),(0,s.jsx)(l.P.button,{className:"flex-1 bg-[#EA5C6F] text-white h-10 px-6 rounded-md font-medium",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:j,children:"Buy Now"}),(0,s.jsx)(l.P.button,{className:"w-10 h-10 flex items-center justify-center border border-gray-200 rounded-md",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:j,children:(0,s.jsx)(d,{size:20,className:"text-gray-500"})})]}),(0,s.jsxs)("div",{className:"mt-12",children:[(0,s.jsx)("h2",{className:"text-xl font-medium mb-4",children:"Description"}),(0,s.jsx)("p",{className:"text-gray-600",children:n.description})]})]})]})}),(0,s.jsx)(k,{isOpen:f,onClose:()=>y(!1),productName:n?.name||"",quantity:m,productId:n?.id})]})}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11860:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(62688).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},12412:e=>{"use strict";e.exports=require("assert")},16189:(e,t,r)=>{"use strict";var s=r(65773);r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31595:(e,t,r)=>{"use strict";r.d(t,{YQ:()=>d,uV:()=>u,DP:()=>c});var s=r(34365),a=r(12292),i=r(93721);let l={addToCart:async e=>i.u.post("/cart",e),updateCart:async e=>i.u.patch("/cart",e),removeFromCart:async e=>i.u.delete(`/cart/${e.productId}`)};var n=r(43018),o=r(9317);let d=(0,o.zD)("cart/addToCart",async(e,t)=>{try{let t=await l.addToCart(e);if(t&&t.data)return a.q.invalidateQueries({queryKey:s.z.lists()}),t.data;throw Error("No data found")}catch(r){let{error:e}=(0,n.h)(r);return t.rejectWithValue(e)}}),c=(0,o.zD)("cart/updateCart",async(e,t)=>{try{let t=await l.updateCart(e);if(t&&t.data)return a.q.invalidateQueries({queryKey:s.z.lists()}),t.data;throw Error("No data found")}catch(r){let{error:e}=(0,n.h)(r);return t.rejectWithValue(e)}}),u=(0,o.zD)("cart/removeFromCart",async(e,t)=>{try{let t=await l.removeFromCart(e);if(t&&t.data)return a.q.invalidateQueries({queryKey:s.z.lists()}),t.data;throw Error("No data found")}catch(r){let{error:e}=(0,n.h)(r);return t.rejectWithValue(e)}}),p=(0,o.Z0)({name:"auth",initialState:{loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(d.pending,e=>{e.loading=!0,e.error=null}).addCase(d.fulfilled,e=>{e.error=null,e.loading=!1}).addCase(d.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}),e.addCase(c.pending,e=>{e.loading=!0,e.error=null}).addCase(c.fulfilled,e=>{e.error=null,e.loading=!1}).addCase(c.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}),e.addCase(u.pending,e=>{e.loading=!0,e.error=null}).addCase(u.fulfilled,e=>{e.error=null,e.loading=!1}).addCase(u.rejected,(e,t)=>{e.error=t.payload,e.loading=!1})}}),{}=p.actions;p.reducer},33873:e=>{"use strict";e.exports=require("path")},41320:(e,t,r)=>{"use strict";r.d(t,{B:()=>d,Q:()=>o});var s=r(93721);let a={all:["products"],lists:()=>[...a.all,"list"],list:e=>[...a.lists(),{filters:e}],details:()=>[...a.all,"detail"],detail:e=>[...a.details(),e]},i=async(e={})=>{let{data:t}=await s.u.get("/products",{params:{page:e.page||1,limit:e.limit||20,category:e.category,minPrice:e.minPrice,maxPrice:e.maxPrice,search:e.search}});return t},l=async e=>{let{data:t}=await s.u.get(`/products/${e}`);return t};var n=r(55533);let o=(e={})=>(0,n.I)({queryKey:a.list(e),queryFn:()=>i(e)}),d=e=>(0,n.I)({queryKey:a.detail(e),queryFn:()=>l(e),enabled:!!e})},43141:(e,t,r)=>{Promise.resolve().then(r.bind(r,57618))},53413:(e,t,r)=>{Promise.resolve().then(r.bind(r,1172))},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},56343:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=r(65239),a=r(48088),i=r(88170),l=r.n(i),n=r(30893),o={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);r.d(t,o);let d={children:["",{children:["product",{children:["[slug]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,57618)),"/Users/priyanshujoshi/Desktop/cosmo-crystals/src/app/product/[slug]/page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,67277)),"/Users/priyanshujoshi/Desktop/cosmo-crystals/src/app/product/[slug]/layout.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"/Users/priyanshujoshi/Desktop/cosmo-crystals/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/priyanshujoshi/Desktop/cosmo-crystals/src/app/product/[slug]/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/product/[slug]/page",pathname:"/product/[slug]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},57618:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/priyanshujoshi/Desktop/cosmo-crystals/src/app/product/[slug]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/priyanshujoshi/Desktop/cosmo-crystals/src/app/product/[slug]/page.tsx","default")},62688:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(43210);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim();var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,s.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:n="",children:o,iconNode:d,...c},u)=>(0,s.createElement)("svg",{ref:u,...l,width:t,height:t,stroke:e,strokeWidth:a?24*Number(r)/Number(t):r,className:i("lucide",n),...c},[...d.map(([e,t])=>(0,s.createElement)(e,t)),...Array.isArray(o)?o:[o]])),o=(e,t)=>{let r=(0,s.forwardRef)(({className:r,...l},o)=>(0,s.createElement)(n,{ref:o,iconNode:t,className:i(`lucide-${a(e)}`,r),...l}));return r.displayName=`${e}`,r}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},67277:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n,metadata:()=>l});var s=r(37413),a=r(84712),i=r(68926);let l={title:"Cosmo Crystals",description:"Generated by create next app"};function n({children:e}){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.default,{}),e,(0,s.jsx)(a.A,{})]})}},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},94735:e=>{"use strict";e.exports=require("events")},95282:(e,t)=>{"use strict";function r(){return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r}}),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},98234:(e,t,r)=>{"use strict";r.d(t,{CU:()=>a});var s=r(54864);s.wA.withTypes(),s.d4.withTypes();let a=s.Pj.withTypes()}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,451,215,885,17,679],()=>r(56343));module.exports=s})();